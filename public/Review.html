<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Отзывы</title>
    <link rel="stylesheet" href="styleses.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
<header>
        <nav>
            <button class="menu-toggle">☰</button>
            <div class="navbar-center">
                <a href="index.html"><img src="images/logo.png" alt="Logo" class="navbar-logo"></a>
            </div>
            <ul class="navbar">
                <div class="menu-content">
                    <button class="close-menu">✕</button>
                    <a href="index.html" class="nav-item">Главная</a>
                    <a href="Review.html" class="nav-item">Отзывы</a>
		    <a href="#" class="nav-item" id="authButton" onclick="handleAuthClick()">Вход</a>
		    <a href="#" id="cabinetButton" class="nav-item" onclick="openCabinet()" style="display: none;">Личный кабинет</a>
                </div>
            </ul>
            <div class="cart-container">
                <a href="#cart" id="cartButton" class="cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                </a>
                <div id="cartDropdown" class="cart-dropdown">
                    <h3>Ваша Корзина</h3>
                    <div id="cartItems"></div>
                    <p id="totalAmount"></p>
                    <button onclick="goToCheckoutPage()">К Оформлению заказа</button>
			<button id="clear-cart" class="clear-cart">Очистить корзину</button>
                </div>
            </div>
        </nav>
    </header>
   <div class="review-container">
<div class="review-header-flex">
  <h2>Отзывы</h2>
<div class="rating-block">
  <div class="star-icon">★</div>
  <div class="rating-info">
    <div class="rating-score" id="averageRating">0.0</div>
    <div class="rating-count" id="totalReviews">0 отзывов</div>
  </div>
  </div>
</div>
        <p>Оставьте свой отзыв</p>

        <form id="reviewForm">
<label for="ratingStars">Рейтинг:</label>
<div class="rating-stars" id="ratingStars">
  <i class="fas fa-star" data-value="1"></i>
  <i class="fas fa-star" data-value="2"></i>
  <i class="fas fa-star" data-value="3"></i>
  <i class="fas fa-star" data-value="4"></i>
  <i class="fas fa-star" data-value="5"></i>
</div>
<input type="hidden" id="starRating" name="rating" value="0">
            <label for="displayName">Имя (необязательно):</label>
            <input type="text" id="displayName" placeholder="Ваше имя (или оставьте пустым)">

            <label for="comment">Комментарий:</label>
            <textarea id="comment" rows="1" placeholder="Введите ваш отзыв..." required></textarea>

            <button type="submit" id="submitReview" class="submit-button">Отправить</button>
        </form>

        <h3>Фильтр отзывов:</h3>
        <div class="review-filters">
            <div>
                <label for="filterStars">Фильтр по звёздам:</label>
                <select id="filterStars">
                    <option value="all">Все</option>
                    <option value="5">5 ★</option>
                    <option value="4">4 ★</option>
                    <option value="3">3 ★</option>
                    <option value="2">2 ★</option>
                    <option value="1">1 ★</option>
                </select>
            </div>
            <div>
                <label for="filterDate">Фильтр по дате:</label>
                <select id="filterDate">
                    <option value="newest">Сначала новые</option>
                    <option value="oldest">Сначала старые</option>
                </select>
            </div>
        </div>
        
        <div id="reviewContainer"></div>
        
        <!-- Добавляем пагинацию -->
        <div class="review-pagination">
            <button class="page-btn" aria-label="Previous">←</button>
            <button class="page-btn" aria-label="Next">→</button>
        </div>
    </div>

    <footer>
        <div class="footer-links">
            <div class="footer-item">
                <h3>Политика конфиденциальности</h3>
                <p>Национальные Блюда © 2025</p>
            <h3>Контакты</h3>
                <p>Телефон: +7 (xxx) xxx-xx-xx</p>
                <p>Email: ssajt431@gmail.com</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        document.getElementById('reviewForm').addEventListener('submit', submitReview);
        document.addEventListener('DOMContentLoaded', loadReviews);
    </script>
	<script>
  function checkAuthStatus() {
    const token = localStorage.getItem("accessToken");
    const authBtn = document.getElementById("authButton");
    const cabinetBtn = document.getElementById("cabinetButton");

    if (token) {
      if (authBtn) authBtn.style.display = "none";
      if (cabinetBtn) {
        cabinetBtn.style.display = "inline-block";
        cabinetBtn.href = "/account.html";
      }
    } else {
      if (cabinetBtn) cabinetBtn.style.display = "none";
      if (authBtn) {
        authBtn.style.display = "inline-block";
        authBtn.href = "/login.html"; // или куда ведёт вход
      }
    }
  }

  // вызов функции сразу
  checkAuthStatus();
</script>
</body>
</html>
